---
import Layout from '@/layouts/Layout.astro';
import { CAFUploadForm } from '@/components/sii/caf-upload-form';
import { ArrowLeft, FolderKey } from 'lucide-react';

// Obtener empresa preseleccionada de query params (opcional)
const empresaId = Astro.url.searchParams.get('empresa') || undefined;
---

<Layout title="Cargar CAF">
  <div class="max-w-2xl">
    <a href="/admin/caf" class="inline-flex items-center text-sm text-muted-foreground hover:text-foreground mb-6">
      <ArrowLeft class="mr-1 h-4 w-4" /> Volver a CAFs
    </a>

    <div class="flex items-center gap-3 mb-6">
      <FolderKey class="h-8 w-8 text-primary" />
      <div>
        <h2 class="text-xl font-semibold">Cargar CAF</h2>
        <p class="text-muted-foreground">Codigo de Autorizacion de Folios</p>
      </div>
    </div>

    <p class="text-muted-foreground mb-6">
      Carga el archivo CAF (XML) otorgado por el SII para habilitar la emision de documentos electronicos.
      El CAF contiene los folios autorizados para un tipo de documento especifico.
    </p>

    <CAFUploadForm
      empresaId={empresaId}
      client:load
    />
  </div>
</Layout>
